# ‚úÖ CHECKLIST DE EXECU√á√ÉO - FASE 2

> **Status:** ‚è∏Ô∏è Aguardando in√≠cio
> **Progresso:** 0/34 tarefas (0%)
> **Iniciado em:** -
> **Conclu√≠do em:** -

---

## üìä PROGRESSO GERAL

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Categoria               ‚îÇ Done  ‚îÇ Total ‚îÇ   %  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Backend - Recorr√™ncia   ‚îÇ  0/6  ‚îÇ    6  ‚îÇ   0% ‚îÇ
‚îÇ Backend - RSVP          ‚îÇ  0/4  ‚îÇ    4  ‚îÇ   0% ‚îÇ
‚îÇ Backend - Convoca√ß√µes   ‚îÇ  0/5  ‚îÇ    5  ‚îÇ   0% ‚îÇ
‚îÇ Frontend - Treinos      ‚îÇ  0/8  ‚îÇ    8  ‚îÇ   0% ‚îÇ
‚îÇ Frontend - RSVP         ‚îÇ  0/6  ‚îÇ    6  ‚îÇ   0% ‚îÇ
‚îÇ Jobs e Automa√ß√£o        ‚îÇ  0/2  ‚îÇ    2  ‚îÇ   0% ‚îÇ
‚îÇ P√°ginas                 ‚îÇ  0/2  ‚îÇ    2  ‚îÇ   0% ‚îÇ
‚îÇ Testes                  ‚îÇ  0/3  ‚îÇ    3  ‚îÇ   0% ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ TOTAL                   ‚îÇ  0/36 ‚îÇ   36  ‚îÇ   0% ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîß BACKEND - TREINOS RECORRENTES (0/6)

### 1.1. Helpers de Recorr√™ncia
- [ ] Criar arquivo `src/lib/recurring-trainings.ts`
- [ ] Implementar `generateOccurrences()`
- [ ] Implementar `createEventsFromRecurring()`
- [ ] Implementar `matchesPattern()`
- [ ] Implementar `getNextOccurrence()`
- [ ] Implementar `validatePattern()`
- [ ] Implementar `getGroupRecurringTrainings()`
- [ ] Adicionar tipos TypeScript
- [ ] Testes unit√°rios b√°sicos

**Status:** ‚è∏Ô∏è N√£o iniciado

---

### 1.2. API - Criar Treino Recorrente
- [ ] Criar schema Zod de valida√ß√£o
- [ ] Criar arquivo `src/app/api/recurring-trainings/route.ts`
- [ ] Implementar POST handler
- [ ] Validar permiss√µes (admin only)
- [ ] Criar recurring_training no banco
- [ ] Gerar eventos para pr√≥ximos 30 dias
- [ ] Retornar treino + contagem
- [ ] Error handling completo
- [ ] Testar com diferentes padr√µes

**Status:** ‚è∏Ô∏è N√£o iniciado

---

### 1.3. API - Listar Treinos Recorrentes
- [ ] Implementar GET handler em `route.ts`
- [ ] Filtrar por groupId
- [ ] Filtrar por modalityId (opcional)
- [ ] Calcular pr√≥xima ocorr√™ncia
- [ ] Contar eventos futuros
- [ ] Ordenar por nextOccurrence
- [ ] Incluir dados da modalidade

**Status:** ‚è∏Ô∏è N√£o iniciado

---

### 1.4. API - Editar Treino Recorrente
- [ ] Criar arquivo `src/app/api/recurring-trainings/[id]/route.ts`
- [ ] Implementar PATCH handler
- [ ] Validar permiss√µes (admin only)
- [ ] Atualizar recurring_training
- [ ] L√≥gica: "Este evento" vs "Todos futuros"
- [ ] Atualizar eventos se necess√°rio
- [ ] Retornar confirma√ß√£o

**Status:** ‚è∏Ô∏è N√£o iniciado

---

### 1.5. API - Excluir Treino Recorrente
- [ ] Implementar DELETE handler
- [ ] Validar permiss√µes (admin only)
- [ ] Soft delete do recurring_training
- [ ] L√≥gica: "Este evento" vs "Toda s√©rie"
- [ ] Soft delete de eventos se necess√°rio
- [ ] Retornar confirma√ß√£o

**Status:** ‚è∏Ô∏è N√£o iniciado

---

### 1.6. Job Agendado - Gerar Eventos
- [ ] Instalar node-cron: `npm install node-cron @types/node-cron`
- [ ] Criar arquivo `src/jobs/generate-recurring-events.ts`
- [ ] Implementar fun√ß√£o de gera√ß√£o di√°ria
- [ ] Configurar cron para rodar √†s 2h
- [ ] Adicionar logging detalhado
- [ ] Iniciar job no app startup
- [ ] Testar gera√ß√£o manual

**Status:** ‚è∏Ô∏è N√£o iniciado

---

## üîß BACKEND - RSVP AVAN√áADO (0/4)

### 2.1. API - Estat√≠sticas de RSVP
- [ ] Criar `src/app/api/events/[id]/rsvp-stats/route.ts`
- [ ] Implementar GET handler
- [ ] Contar confirma√ß√µes por status
- [ ] Calcular taxa de confirma√ß√£o
- [ ] Listar confirmados com dados
- [ ] Ordenar por data de confirma√ß√£o
- [ ] Incluir total de vagas

**Status:** ‚è∏Ô∏è N√£o iniciado

---

### 2.2. API - Lista de Confirmados
- [ ] Criar `src/app/api/events/[id]/confirmed/route.ts`
- [ ] Implementar GET handler
- [ ] JOIN com profiles
- [ ] Incluir posi√ß√£o se convocado
- [ ] Ordenar por confirmedAt
- [ ] Retornar lista completa

**Status:** ‚è∏Ô∏è N√£o iniciado

---

### 2.3. Helper - Taxa de Presen√ßa
- [ ] Criar arquivo `src/lib/attendance.ts`
- [ ] Implementar `calculateAttendanceRate()`
- [ ] Contar eventos confirmados
- [ ] Contar eventos totais
- [ ] Calcular taxa %
- [ ] Filtrar por modalidade (opcional)
- [ ] Retornar objeto com m√©tricas

**Status:** ‚è∏Ô∏è N√£o iniciado

---

### 2.4. Helper - Hist√≥rico de Presen√ßa
- [ ] Implementar `getUserAttendanceHistory()` em `attendance.ts`
- [ ] Buscar √∫ltimos N eventos
- [ ] Incluir status de RSVP
- [ ] Marcar se compareceu (eventos passados)
- [ ] Ordenar por data decrescente
- [ ] Retornar array formatado

**Status:** ‚è∏Ô∏è N√£o iniciado

---

## üîß BACKEND - CONVOCA√á√ïES (0/5)

### 3.1. Migration - Verificar modality_id
- [ ] Verificar migration `20260227000004_game_convocations.sql`
- [ ] Confirmar coluna modality_id existe
- [ ] Confirmar index criado
- [ ] Aplicar se necess√°rio

**Status:** ‚è∏Ô∏è N√£o iniciado

---

### 3.2. API - Criar Convoca√ß√£o
- [ ] Criar `src/app/api/events/[id]/convocations/route.ts`
- [ ] Implementar POST handler
- [ ] Validar permiss√µes (admin only)
- [ ] Buscar atletas da modalidade
- [ ] Filtrar por posi√ß√µes/rating (opcional)
- [ ] Criar convoca√ß√µes em lote
- [ ] Enviar notifica√ß√µes (placeholder)
- [ ] Retornar lista de convocados

**Status:** ‚è∏Ô∏è N√£o iniciado

---

### 3.3. API - Listar Convoca√ß√µes
- [ ] Implementar GET handler em `route.ts`
- [ ] JOIN com profiles
- [ ] JOIN com event_attendance para RSVP
- [ ] Incluir dados da modalidade
- [ ] Retornar lista completa
- [ ] Ordenar por nome

**Status:** ‚è∏Ô∏è N√£o iniciado

---

### 3.4. Helper - Atletas da Modalidade
- [ ] Adicionar fun√ß√£o em `src/lib/modalities.ts`
- [ ] Implementar `getModalityAthletesForEvent()`
- [ ] Filtrar por posi√ß√µes (opcional)
- [ ] Filtrar por rating m√≠nimo (opcional)
- [ ] Excluir IDs fornecidos (opcional)
- [ ] Ordenar por rating decrescente
- [ ] Retornar lista formatada

**Status:** ‚è∏Ô∏è N√£o iniciado

---

### 3.5. Notifica√ß√µes (Placeholder)
- [ ] Criar arquivo `src/lib/notifications.ts`
- [ ] Implementar `notifyConvocation()` placeholder
- [ ] Adicionar logging
- [ ] Adicionar TODO para implementa√ß√£o futura
- [ ] Documentar interface esperada

**Status:** ‚è∏Ô∏è N√£o iniciado

---

## üé® FRONTEND - COMPONENTES DE TREINOS (0/8)

### 4.1. TrainingMetricsCards
- [ ] Criar `src/components/trainings/training-metrics-cards.tsx`
- [ ] Buscar m√©tricas via API
- [ ] 4 cards: Hoje, Esta Semana, Pendentes, Taxa
- [ ] Usar MetricCard do Design System
- [ ] Loading state
- [ ] Grid responsivo

**Status:** ‚è∏Ô∏è N√£o iniciado

---

### 4.2. RecurringBadge
- [ ] Criar `src/components/trainings/recurring-badge.tsx`
- [ ] Aceitar RecurrencePattern
- [ ] Formatar texto leg√≠vel
- [ ] Usar Badge do shadcn
- [ ] Varia√ß√µes de tamanho (sm, md)
- [ ] √çcone üîÅ

**Status:** ‚è∏Ô∏è N√£o iniciado

---

### 4.3. CreateTrainingModal
- [ ] Criar `src/components/trainings/create-training-modal.tsx`
- [ ] Tabs: "√önico" e "Recorrente"
- [ ] Formul√°rio de evento √∫nico
- [ ] Formul√°rio de recorrente
- [ ] Integrar ModalitySelector
- [ ] Integrar RecurrenceSelector
- [ ] Valida√ß√£o com Zod
- [ ] Submit para API correta
- [ ] Toast de sucesso/erro

**Status:** ‚è∏Ô∏è N√£o iniciado

---

### 4.4. RecurrenceSelector
- [ ] Criar `src/components/trainings/recurrence-selector.tsx`
- [ ] Select de frequ√™ncia (Semanal, Quinzenal, Mensal)
- [ ] Campos condicionais por frequ√™ncia
- [ ] Select dia da semana
- [ ] Input dia do m√™s
- [ ] DatePicker data fim
- [ ] Valida√ß√£o de inputs
- [ ] Preview do padr√£o

**Status:** ‚è∏Ô∏è N√£o iniciado

---

### 4.5. TrainingFilters
- [ ] Criar `src/components/trainings/training-filters.tsx`
- [ ] Select de modalidade
- [ ] Date range picker
- [ ] Checkboxes de status RSVP
- [ ] Toggle "Apenas recorrentes"
- [ ] Bot√£o "Limpar Filtros"
- [ ] Callback onChange

**Status:** ‚è∏Ô∏è N√£o iniciado

---

### 4.6. EditRecurringModal
- [ ] Criar `src/components/trainings/edit-recurring-modal.tsx`
- [ ] Radio: "Este evento" vs "Todos futuros"
- [ ] Formul√°rio reutiliz√°vel
- [ ] Submit com escopo de edi√ß√£o
- [ ] Confirma√ß√£o de sucesso
- [ ] Error handling

**Status:** ‚è∏Ô∏è N√£o iniciado

---

### 4.7. DeleteRecurringConfirm
- [ ] Criar `src/components/trainings/delete-recurring-confirm.tsx`
- [ ] AlertDialog do shadcn
- [ ] Op√ß√µes: "Este evento" vs "Toda s√©rie"
- [ ] Texto explicativo de impacto
- [ ] Bot√£o destrutivo
- [ ] Callback com escopo

**Status:** ‚è∏Ô∏è N√£o iniciado

---

### 4.8. ModalitySelector
- [ ] Criar `src/components/modalities/modality-selector.tsx`
- [ ] Select de modalidades
- [ ] Buscar modalidades do grupo
- [ ] Op√ß√£o "Todas" se allowNone
- [ ] Loading state
- [ ] Empty state
- [ ] Controlled component

**Status:** ‚è∏Ô∏è N√£o iniciado

---

## üé® FRONTEND - COMPONENTES DE RSVP (0/6)

### 5.1. RSVPProgressBar
- [ ] Criar `src/components/rsvp/rsvp-progress-bar.tsx`
- [ ] Progress bar do shadcn
- [ ] Calcular % confirmados
- [ ] Texto "X/Y confirmados"
- [ ] Cores condicionais (verde/amarelo/vermelho)
- [ ] Tooltip com detalhes

**Status:** ‚è∏Ô∏è N√£o iniciado

---

### 5.2. ConfirmedAvatars
- [ ] Criar `src/components/rsvp/confirmed-avatars.tsx`
- [ ] Mostrar at√© 4 avatares
- [ ] Avatar do shadcn
- [ ] Badge "+N" se mais que 4
- [ ] Tooltip com nome ao hover
- [ ] Stack horizontal

**Status:** ‚è∏Ô∏è N√£o iniciado

---

### 5.3. RSVPStats
- [ ] Criar `src/components/rsvp/rsvp-stats.tsx`
- [ ] Card completo de estat√≠sticas
- [ ] Integrar RSVPProgressBar
- [ ] Integrar ConfirmedAvatars
- [ ] Lista de confirmados expand√≠vel
- [ ] Badges de contadores
- [ ] Responsivo

**Status:** ‚è∏Ô∏è N√£o iniciado

---

### 5.4. AttendanceHistory
- [ ] Criar `src/components/athletes/attendance-history.tsx`
- [ ] Tabela do shadcn
- [ ] Colunas: Data, Evento, Status, Compareceu
- [ ] √çcones de status
- [ ] Cores condicionais
- [ ] Pagina√ß√£o se >10 registros
- [ ] Loading state

**Status:** ‚è∏Ô∏è N√£o iniciado

---

### 5.5. RSVPButton (Melhorado)
- [ ] Criar `src/components/rsvp/rsvp-button.tsx`
- [ ] Estados visuais por status
- [ ] Loading ao clicar
- [ ] Toast de feedback
- [ ] Dropdown para mudar status
- [ ] √çcones condicionais
- [ ] Disabled se evento passado

**Status:** ‚è∏Ô∏è N√£o iniciado

---

### 5.6. WaitingList (Placeholder)
- [ ] Criar `src/components/rsvp/waiting-list.tsx`
- [ ] UI de lista de espera
- [ ] Bot√£o "Entrar na Lista"
- [ ] Mostrar posi√ß√£o na fila
- [ ] TODO: l√≥gica de notifica√ß√£o
- [ ] Empty state

**Status:** ‚è∏Ô∏è N√£o iniciado

---

## üìÑ P√ÅGINAS (0/2)

### 6.1. Atualizar P√°gina de Treinos
- [ ] Abrir `src/app/(dashboard)/treinos/page.tsx`
- [ ] Adicionar TrainingMetricsCards no topo
- [ ] Adicionar TrainingFilters
- [ ] Mostrar RecurringBadge nos cards
- [ ] Bot√£o "Novo Treino" abre CreateTrainingModal
- [ ] Aplicar filtros na listagem
- [ ] Loading states
- [ ] Empty states

**Status:** ‚è∏Ô∏è N√£o iniciado

---

### 6.2. Atualizar P√°gina de Detalhes
- [ ] Abrir `src/app/(dashboard)/treinos/[id]/page.tsx`
- [ ] Adicionar RSVPStats expandida
- [ ] Se√ß√£o de convocados (se houver)
- [ ] Bot√£o "Convocar Atletas" (admin only)
- [ ] Modal de convoca√ß√£o
- [ ] Editar/Excluir recorrente (admin only)
- [ ] Badges de informa√ß√£o
- [ ] Responsivo

**Status:** ‚è∏Ô∏è N√£o iniciado

---

## üß™ TESTES (0/3)

### Testes Unit√°rios
- [ ] Criar `src/lib/__tests__/recurring-trainings.test.ts`
- [ ] Testes de generateOccurrences()
- [ ] Testes de matchesPattern()
- [ ] Testes de validatePattern()
- [ ] Testes de getNextOccurrence()
- [ ] Cobertura >80%

**Status:** ‚è∏Ô∏è N√£o iniciado

---

### Testes de Integra√ß√£o
- [ ] Criar `tests/api/recurring-trainings.test.ts`
- [ ] POST /api/recurring-trainings
- [ ] GET /api/recurring-trainings
- [ ] PATCH /api/recurring-trainings/[id]
- [ ] DELETE /api/recurring-trainings/[id]
- [ ] Verificar eventos gerados

**Status:** ‚è∏Ô∏è N√£o iniciado

---

### Testes E2E
- [ ] Criar `tests/e2e/recurring-trainings.spec.ts`
- [ ] Admin cria treino recorrente
- [ ] Verifica badge "RECORRENTE"
- [ ] Edita s√©rie completa
- [ ] Exclui um evento
- [ ] Verifica estat√≠sticas RSVP

**Status:** ‚è∏Ô∏è N√£o iniciado

---

## üìã VALIDA√á√ÉO FINAL

### Backend
- [ ] TypeScript compila sem erros
- [ ] Todas as APIs funcionando
- [ ] Job agendado rodando
- [ ] Valida√ß√µes Zod completas
- [ ] Error handling robusto
- [ ] Testes unit√°rios passando

### Frontend
- [ ] Todos os componentes criados
- [ ] P√°ginas atualizadas
- [ ] Design System aplicado
- [ ] Responsivo
- [ ] Loading/Empty states
- [ ] Toast notifications

### Funcionalidades
- [ ] Treinos recorrentes criando eventos
- [ ] RSVP com estat√≠sticas funcionando
- [ ] Convoca√ß√µes por modalidade
- [ ] Filtros aplicando corretamente
- [ ] M√©tricas calculando

---

## üìù NOTAS E OBSERVA√á√ïES

### Bloqueadores
*Nenhum bloqueador identificado no momento*

### Issues Encontradas
*Registrar aqui quaisquer bugs ou problemas durante desenvolvimento*

### Melhorias Futuras
- Notifica√ß√µes push reais (atualmente placeholder)
- Lista de espera autom√°tica
- Integra√ß√£o com calend√°rio externo
- Analytics de presen√ßa avan√ßado

---

## ‚è±Ô∏è REGISTRO DE TEMPO

| Data | In√≠cio | Fim | Dura√ß√£o | Atividade | Tarefas Conclu√≠das |
|------|--------|-----|---------|-----------|-------------------|
| - | - | - | - | - | - |

**Total:** 0 horas

---

**√öltima atualiza√ß√£o:** 2026-01-24
**Status:** ‚è∏Ô∏è Aguardando in√≠cio
**Progresso:** 0/36 tarefas (0%)
**Pr√≥ximo:** Validar Fase 1 e iniciar desenvolvimento
